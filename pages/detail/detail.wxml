<!--pages/detail/detail.wxml-->
<view class="container">
  <view class="user-info-con">
    <block wx:if="{{!hasUserInfo && canIUse}}">
      <button class="user-info-btn" open-type="getUserInfo" bindgetuserinfo="getUserInfo"> 获取头像昵称 </button>
      <text class="userinfo-nickname"></text>
    </block>
    <block wx:else>
      <image bindtap="bindViewTap" class="userinfo-avatar" src="{{userInfo.avatarUrl}}" mode="cover"></image>
      <!-- <text class="userinfo-nickname">{{userInfo.nickName}}</text> -->
    </block>
  </view>
  <view class="obj-con">
    <image src="{{obj.icon}}" class="pic"></image>
    <view class="right">
      <view class="title">{{obj.name}}</view>
      <view class="updateTime">更新时间：{{obj.updateTime}}</view>
    </view>
  </view>
  <view class="category-con">
    <view class="left-con">
      <text class="category-name" wx:for="{{categoryList}}" data-name="{{item}}" bindtap="tapName">{{item}}</text>
    </view>
    <view class="right-con">
      <text class="category-name" data-name="关联数据" bindtap="tapName">{{'关联数据'}}</text>
    </view>
  </view>
  <view wx:if="{{curContent === '基本信息'}}" class="content-con">
    {{content.id}} {{content.text}}
  </view>
  <view wx:elif="{{curContent === '连接节点'}}" class="list-con">
    <scroll-view scroll-y="true" style="height:400px" bindscrolltolower="lower">
      <block wx:for="{{mockList}}">
        <navigator url="/pages/detail/detail?id={{item.id}}" hover-class="navigator-hover">
          <image src="{{item.icon}}" class="pic"></image>
          <view class="right">
            <view class="title">{{item.name}}</view>
            <view class="updateTime">{{item.label}}</view>
          </view>
        </navigator>
      </block>
    </scroll-view>
  </view>
  <view wx:else class="edit-con">
    <view class="textarea-con">
      <textarea placeholder="输入点什么吧..." class="textarea"></textarea>
    </view>
    <view class="images-con">
      <block wx:for="{{images}}">
        <view class="image-con">
          <!-- 图片缩略图  -->
          <image class="image" src="{{item}}" mode="aspectFill" data-idx="{{index}}" bindtap="handleImagePreview"></image>
          <!-- 移除图片的按钮  -->
          <image class="image-remover" data-idx="{{index}}" bindtap="removeImage" src="../../images/delete.png"> </image>
        </view>
      </block>
      <image class="image image-add" src="../../images/add.png" ontap="chooseImage">add</image>
    </view>
    <view class="btn-con">
      <button size="mini">reset</button>
      <button size="mini">submit</button>
    </view>
  </view>
</view>